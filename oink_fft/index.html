<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<link rel="icon" type="image/png" href="/oink_fft/favicon/favicon-96x96.png"/>
	<meta name="viewport" content="width=device-width,initial-scale=1"/>
	<meta name="OINK FFT" content="The oinkiest FFT in the web"/>
	<title>OINK FFT</title>

	<script
	    src="https://code.jquery.com/jquery-3.7.1.js"
	    integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
		crossorigin="anonymous">
	</script>
	<link href="/oink_fft/css/theme.css" rel="stylesheet">
	<link href="/oink_fft/css/about.css" rel="stylesheet">

	<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
</head>
<body>
	<section class="snappable" id="section_main">
		<div class="giphy-round">
    	   <iframe src="https://giphy.com/embed/2aUH5BAyaNd60" width="480" height="270" frameBorder="0" class="giphy-embed" allowFullScreen></iframe>
        </div>
	    <div id="root">
	    </div>
	</section>
	<div class="split_section">
	    <section class="snappable" id="section_intro">

			<h1 id="h_1">Introducing Oink FFT: A Quick and Dirty JavaScript FFT Implementation</h1>
            <div id="d_1" class="collapsable">
				<p id="d_1">Are you looking to dive into Fourier analysis without getting lost in complex algorithms and mathematical intricacies?<br>Meet Oink FFT - your quick and dirty solution for Fast Fourier Transform in JavaScript.<br>
				Whether you're exploring signal processing concepts, building audio visualizations, or experimenting with frequency analysis, Oink FFT provides a simple and effective solution to get you started quickly. Dive into the world of Fourier analysis with Oink FFT and unlock the dirty secrets hidden within your data.</p>
            </div>

			<h2 id="h_2">What is FFT?</h2>
            <div id="d_2" class="collapsable">
				<p>FFT, or Fast Fourier Transform, is a powerful algorithm used in digital signal processing to efficiently compute the Discrete Fourier Transform (DFT) of a sequence. It transforms a signal from its time-domain representation to its frequency-domain representation, revealing the underlying frequencies present in the signal.</p>
            </div>

			<h2 id="h_3">Why Oink FFT?</h2>
            <div id="d_3" class="collapsable">
				<p>Oink FFT is designed for simplicity and ease of use. It provides a pretty quick FFT algorithm in JavaScript, allowing you to perform frequency analysis on your data with minimal effort.</p>

				<h3>Key Features:</h3>

				<ol>
				  <li><strong>Simplicity:</strong> Oink FFT is designed to be easy to understand and use, making it perfect for beginners and casual users.</li>
				  <li><strong>Quick and Dirty:</strong> This FFT implementation prioritizes simplicity and speed, making it suitable for rapid prototyping and experimentation.</li>
				  <li><strong>JavaScript-Based:</strong> Oink FFT is written in JavaScript, making it accessible to web developers and compatible with modern web applications.</li>
				  <li><strong>Speed-Optimized:</strong> Leveraging WebAssembly (WASM) and harnessing specific mathematical Fourier Intrinsics, this implementation is finely tuned for exceptional speed.</li>
				  <li><strong>Competitive Performance:</strong> With its optimized speed, Oink FFT can effectively compete with other available FFT implementations.</li>
				</ol>
		    </div>
	    </section>
		<section class="snappable" id="section_usage">
	        <h2>Getting Started:</h2>

			<p>To start using Oink FFT, simply import the library into your JavaScript project and follow the intuitive API to perform FFT operations on your data.</p>

		    <h3>1. Easy Import</h3>
		    <pre>
		    	<code>
		    		<span class="comment">//To use this library, you first need to include it in your project.</span>
		    		<span>import * as OINK from 'https://cdn.jsdelivr.net/gh/sch1z0net/oink@v0.1.5-alpha/oink_fft.js';</span>
		    	</code>
		    </pre>

		    <h3>2. Usage Example</h3>
		    <pre>
		    	<code>
		            <span class="comment">//Here's how you can use the Forward FFT of size 1024</span>
		            <span class="comment">//It returns the spectrum, a Float32Array of length = 2048</span>
		            <span class="comment">//with real and imaginary values in alterning order</span>
		            <span class="comment">//[re, im, re, im, re, im ...]</span>
		    		<span>let realInput = new Float32Array([/* Fill with 1024 Float Values */]);</span>
		    	    <span>let spectrum  = OINK.fftReal1024(realInput);</span>
		    	    <span>console.log("FFT Result:", spectrum);</span>
		    	</code>
		    </pre>

		    <h3>3. Use different available FFT sizes</h3>
		    <pre>
		    	<code>
		    		<span class="comment">// 128 input -> 256 spectrum</span>
		    		<span>let spectrum  = OINK.fftReal128(realInput);</span>
		    		<span class="comment">// 256 input -> 512 spectrum</span>
		    	    <span>let spectrum  = OINK.fftReal256(realInput);</span>
		    	    <span class="comment">// 512 input -> 1024 spectrum</span>
		    	    <span>let spectrum  = OINK.fftReal512(realInput);</span>
		    	    <span class="comment">// 1024 input -> 2048 spectrum</span>
		    	    <span>let spectrum  = OINK.fftReal1024(realInput);</span>
		    	    <span class="comment">// 2048 input -> 4096 spectrum</span>
		    	    <span>let spectrum  = OINK.fftReal2048(realInput);</span>
		    	</code>
	        </pre>

	        <h3>Just try out some Examples</h3>
	        
	        <div id="examples">
	             <a href="./examples/simple" target="_blank">Simple FFT Table</a>
	             <a href="./examples/plot" target="_blank">FFT Plotter using Chart.js</a>
	        </div>
		</section>
    </div>
    <section class="snappable" id="section_about">
       <h1>
           About this Project
       </h1>

       <div id="about">
           When working on a music project, I needed a quick and dirty 
           solution to process FFT as fast as possible. 
           I didn't want to rely on third party tools, 
           so I started to study FFT on my own.
           I figured out how to exploit the symmetry properties 
           that are intrinsic to the FFT, which could save a lot of
           execution time already. To make it a little bit dirty (but even faster)
           I used Float32 Arrays instead of the full double precision.
           The quality of the resulting sound after FFT processing is pretty acceptable,
           and if your requirements are even lower than that
           (like for example just displaying a rough frequency spectrum),
           then you shouldn't worry about the little 'dirt' that's introduced.
           Finally I digged even deeper to optimize the execution speed. 
           So I ended up changing my initial JS code to C and 
           used Web Assembly (WASM) to get the full potential out of modern Web Development.
       </div>

       <div id="dev">
		 <div id="dev_row">
		    <div class="dev_row_item" style="width: fit-content;">
		         <h1>
		            About me:
		         </h1>

		         <div id="profile_div">
		            <img id="profile" src="../profile.png" />
		            <div>
		            <p style="padding-left:0px;"> Hi, I'm Sebastian. </p>
		            <p style="padding-left:10px;"> I am diagnosed with paranoid schizophrenia. </p>
		            <p style="padding-left:20px;"> Although this illness has taken much quality from my life, </p> 
		            <p style="padding-left:30px;"> I am still trying to stay creative and sane. </p> 
		            <p style="padding-left:20px;"> I am into coding with a certain background in computer science. </p>
		            <p style="padding-left:10px;"> You can learn more about me on www.sch1z0.net</p>
		            </div>
		         </div>
		    </div>
		    <div class="dev_row_item" style="max-width: 250px;">
		        <div style="border-bottom: solid 1px white;">
		         <h1>Links:</h1>

		           <a href="https://www.sch1z0.net">
		            <img class="links" src="https://upload.wikimedia.org/wikipedia/commons/3/34/Home-icon.svg"/>
		           </a>

		           <a href="https://github.com/sch1z0net">
		            <img class="links" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/GitHub_Invertocat_Logo.svg/1280px-GitHub_Invertocat_Logo.svg.png"/>
		           </a>

		           <a href="https://www.instagram.com/sch1z0net/">
		            <img class="links" src="https://upload.wikimedia.org/wikipedia/commons/2/27/CIS-A2K_Instagram_Icon_%28Black%29.svg"/>
		           </a>

		           <a href="mailto:sebastianprusak@sch1z0.net">
		            <img class="links" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/High-contrast-emblem-mail.svg"/>
		           </a> 
		        </div>
		        <div>
		           <h1>Donate:</h1>
		           <div style="text-align: justify;">
		           You can help me through my life with a small donation on Paypal or buymeacoffee.com, if you like my work.
		         <div style="display:flex; flex-direction: row; margin-left: 10px;">
		           <div id="donate-button-container" style="transform:scale(1.0);  margin-top: 14px;">
		            <div id="donate-button"></div>
		               <script src="https://www.paypalobjects.com/donate/sdk/donate-sdk.js" charset="UTF-8"></script>
		               <script>
		                 PayPal.Donation.Button({
		                  env:'production',
		                  hosted_button_id:'TZW3JS7UQ5KTG',
		                  image: {
		                  src:'https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif',
		                  alt:'Donate with PayPal button',
		                  title:'PayPal - The safer, easier way to pay online!',
		                  }
		                 }).render('#donate-button');
		               </script>
		            </div>

		        <div id="coffee-button-container" style="transform:scale(0.5); margin-left: 10px;">
		           <a href="https://www.buymeacoffee.com/sch1z0"><img src="https://img.buymeacoffee.com/button-api/?text=Buy me a coffee&emoji=&slug=sch1z0&button_colour=ffffff&font_colour=000000&font_family=Cookie&outline_colour=000000&coffee_colour=FFDD00" /></a>
		        </div>
		       </div>

		     </div>
		   </div>
		</div>
      </div>
    </div>

    <div id="imprint">
        © 2024 • Sebastian Prusak
    </div>

    </section>
	<div id="footer">
	    <div id="anchors">
	    	<a href="#section_main"   class="anchor">Benchmark</a>
	    	<a href="#section_intro"  class="anchor">Intro</a>
          	<a href="#section_usage"  class="anchor">Usage</a>
	        <a href="#section_about"  class="anchor">About</a>
	    </div>
	</div>

	<script>
    $(document).ready(function(){
        let currentSection = $("#section_main");

		// Smooth scrolling behavior
		document.querySelectorAll('a[href^="#"]').forEach(anchor => {
		    anchor.addEventListener('click', function (e) {
		        e.preventDefault();

		        document.querySelector(this.getAttribute('href')).scrollIntoView({
		            behavior: 'smooth'
		        });
		    });

		    $("#h_1").click(function(){ $(".collapsable").hide(); $("#d_1").show(); });
		    $("#h_2").click(function(){ $(".collapsable").hide(); $("#d_2").show(); });
		    $("#h_3").click(function(){ $(".collapsable").hide(); $("#d_3").show(); });
		});
        
        // Function to update background opacity based on scroll position
        function updateBackgroundOpacity() {
            // Get the scroll position relative to the top of the page
            const scrollPosition = $(window).scrollTop();
            // Determine the opacity based on the scroll position
            const totalHeight = $("#section_main").height();
            const opacity = (scrollPosition / totalHeight);
            // Apply the opacity to the section background
            $("#section_intro").css("background-color", `rgba(50, 50, 50, ${opacity})`);
        }

        // Function to update background opacity based on scroll position
        function updateBackgroundOpacity2() {
            // Get the scroll position relative to the top of the page
            const scrollPosition = $(window).scrollTop();
            // Determine the opacity based on the scroll position
            const totalHeight = $("#section_usage").height();
            const opacity = (scrollPosition / totalHeight);
            // Apply the opacity to the section background
            $("#section_usage").css("background-color", `rgba(10, 10, 10, ${opacity})`);
        }

        // Attach event listener to the scroll event
        $(window).scroll(updateBackgroundOpacity);
        $(window).scroll(updateBackgroundOpacity2);

        // Call the function initially to set the initial background opacity
        updateBackgroundOpacity();

		let snapping = false;
		let blockWheel = false;
        let expanded;

        function scrollTo(section){
    	    // Capture the offset of the new section
	        const offsetTop = section.offset().top;

	        // During Snapping
	        blockWheel = true;
	        console.log("start snapping");
	        updateCurrentSection(section);

	        // Scroll to the captured offset
	        $('html, body').animate({
	            scrollTop: offsetTop
	        }, 400, 'swing', () => {
	            blockWheel = false;
	            snapping = false;
	        });
        }


        function updateResponsive() {
		    var windowWidth = $(window).width();
            
            // Smartphone Layout
		    if (windowWidth <= 850) {
		    	if(expanded == null || expanded == true){
                    expanded = false;
		    	}else{
		    		return;
		    	}
		    	// On Change to Smartphone View
		        scrollTo(currentSection);
		    	$('a[href="#section_intro"]').show();
                $("section").addClass("snappable");
            // Desktop Layout
		    } else {
		    	if(expanded == null || expanded == false){
                    expanded = true;
		    	}else{
		    		return;
		    	}
		    	// On Change to Desktop View
		    	if(currentSection[0].id == "section_intro"){
		    		scrollTo($("#section_usage"));
		    	}else{
		    		scrollTo(currentSection);
		    	}
		    	$('a[href="#section_intro"]').hide();
		    	$("section").addClass("snappable");
                $("#section_intro").removeClass("snappable");
		    }
        }
        updateResponsive();

		$(window).resize(function() {
            updateResponsive();
		});

        function getNext(){
        	let i = 0;
        	let sections = $(".snappable");
            for(section of sections){
            	 if(section.id === currentSection[0].id){
                      return $(sections[i+1]);
            	 };
            	 i++;
            }           
        }

        function getPrev(){
        	let i = 0;
        	let sections = $(".snappable");
            for(section of sections){
            	 if(section.id === currentSection[0].id){
                      return $(sections[i-1]);
            	 };
            	 i++;
            }           
        }

        function updateCurrentSection(section){
        	currentSection = section;
            var anchor = $('a[href="#'+currentSection[0].id+'"]');
            $(".anchor").removeClass("current_anchor");
            $(".snappable").removeClass("current_section");
            anchor.addClass("current_anchor");
            currentSection.addClass("current_section");
        }

        $(".anchor").click(function(){
            updateCurrentSection( $("#"+this.href.split('#')[1]) );
        });

        async function handleSnap(dir){
        	let newSection;
        	if(dir == "down"){
                newSection = await getNext();
        	}else 
        	if(dir == "up"){
                newSection = await getPrev();
        	}

		    // If there is a new section, scroll to it smoothly
		    if (newSection && newSection.length > 0) {
                scrollTo(newSection);
		    }else{
		    	blockWheel = false;
		        snapping = false;
		    }

        }
        
        window.benchmarking = false;
		// Function to handle scrolling
		window.addEventListener('scroll', function(event) {
		   if(snapping){ return; }
		   event.preventDefault();
		   event.stopPropagation();
		});

	    // Prevent scrolling
		window.addEventListener('wheel', function(event) {
		  if(blockWheel || window.benchmarking){ 
		  	  event.preventDefault(); 
		  }else{
              if(snapping){ return; }

		  	  const deltaY = event.deltaY;
		  	  let dir;
		  	  if (deltaY < 0) {
                dir = "up";
              } else {
           	    dir = "down";
              }

              if (dir ===   "up"){
                if($(window).scrollTop() > currentSection.offset().top) {
                   return;
                }else
                if(Math.abs(deltaY) < 50){
                  $(window).scrollTop( currentSection.offset().top );
              	  event.preventDefault();
              	  return;
                }

              }
              if (dir === "down"){
              	if($(window).scrollTop() < currentSection.offset().top + currentSection.outerHeight() - $(window).height()) {
                   return;
                }else
                if(Math.abs(deltaY) < 50){
                  $(window).scrollTop( currentSection.offset().top + currentSection.outerHeight() - $(window).height() );
              	  event.preventDefault();
              	  return;
                }
              }

              snapping = true;
              handleSnap(dir); 
		  }
		}, { passive: false });
    });
	</script>

    <script type="module" src="/oink_fft/js/main.js" defer></script>

</body>
</html>